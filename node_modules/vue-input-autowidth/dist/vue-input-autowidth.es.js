const e={maxWidth:void 0,minWidth:void 0,comfortZone:"0px",watchWindowSize:!1,windowResizeHandlerDebounceTime:150,disableNonInputWarning:!1},i=e=>{const{mirror:i,options:t}=e;t.maxWidth&&(e.style.maxWidth=t.maxWidth),t.minWidth&&(e.style.minWidth=t.minWidth);let n=e.value;for(n||(n=e.placeholder||"");i.childNodes.length;)i.removeChild(i.childNodes[0]);i.appendChild(document.createTextNode(n));const o=i.scrollWidth+2;o!=e.scrollWidth&&(e.style.width=`${o}px`)},t=e=>{const i=window.getComputedStyle(e),{options:t}=e;Object.assign(e.mirror.style,{position:"absolute",top:"0",left:"0",visibility:"hidden",height:"0",overflow:"hidden",whiteSpace:"pre",fontSize:i.fontSize,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontStyle:i.fontStyle,letterSpacing:i.letterSpacing,textTransform:i.textTransform,paddingRight:`calc(${t.comfortZone} + ${i.paddingRight} + ${i.borderRightWidth})`,paddingLeft:`calc(${i.paddingLeft} + ${i.borderLeftWidth})`})},n=e=>{t(e),i(e)};var o={beforeMount:function(i,t){var n;if(i.options=(n=t.value,Object.assign({},e,n)),!i.options.disableNonInputWarning&&"INPUT"!==i.tagName.toLocaleUpperCase())throw new Error("v-input-autowidth can only be used on input elements.")},mounted:function(e,o,r){const d=Object.prototype.hasOwnProperty.call(r.props,"@onUpdate:modelValue");if(e.sizerFunc=t=>i(e),e.mirror=document.createElement("div"),t(e),e.mirror.setAttribute("aria-hidden","true"),document.body.appendChild(e.mirror),n(e),d||e.addEventListener("input",e.sizerFunc),e.options.watchWindowSize&&void 0!==e.options.windowResizeHandlerDebounceTime){const i=i=>n(e);e.windowResizeHandler=((e,i)=>{let t;return(...n)=>{let o;return t&&clearTimeout(t),t=setTimeout((()=>{o=e(...n)}),i),o}})(i,e.options.windowResizeHandlerDebounceTime),window.addEventListener("resize",e.windowResizeHandler,{passive:!0})}},updated:function(e){e.sizerFunc&&e.sizerFunc()},unmounted:function(e){document.body.removeChild(e.mirror),e.sizerFunc&&e.removeEventListener("input",e.sizerFunc),e.options.watchWindowSize&&e.windowResizeHandler&&window.removeEventListener("resize",e.windowResizeHandler)}};const r={install:e=>{Number(e.version.split(".")[0])<3&&console.warn("This plugin requires Vue 3"),e.directive("autowidth",o)}};export{o as directive,r as plugin};
